(this["webpackJsonphappy-mail-ui"]=this["webpackJsonphappy-mail-ui"]||[]).push([[0],{151:function(e,t,a){},156:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(0),c=a(13),s=a.n(c),r=(a(151),a(21)),o=a(61),l=(a(156),a(47)),j=a(14),d=a(200),b=a(221),m=a(222),h=a(70),O=a(208),u=a(218),x=a(161),p=a(216),g=a(205),f=a(206),v=a(207),w=a(202),y=a(204),S=a(117),N=a.n(S),k=a(118),E=a.n(k),T=a(119),_=a.n(T),C=a(120),W=a.n(C),I=a(121),U=a.n(I),D=a(122),R=a.n(D),L=a(123),A=a.n(L),G=a(116),M=a.n(G),H=Object(d.a)((function(e){return{link:{textDecoration:"none",color:"black"},newMessageLink:{backgroundColor:"gold"},dividerMargin:{marginTop:e.spacing(3)}}})),B=function(){var e=H();return Object(n.jsx)(w.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(l.a,{className:e.link,to:"/write",children:Object(n.jsxs)(y.a,{button:!0,className:e.newMessageLink,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(M.a,{})}),Object(n.jsx)(f.a,{primary:"New message"})]})}),Object(n.jsx)(l.a,{className:e.link,to:"/inbox",children:Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(N.a,{})}),Object(n.jsx)(f.a,{primary:"Inbox"})]})}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(E.a,{})}),Object(n.jsx)(f.a,{primary:"Trash"})]}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(_.a,{})}),Object(n.jsx)(f.a,{primary:"Sent"})]}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(W.a,{})}),Object(n.jsx)(f.a,{primary:"Spam"})]}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(U.a,{})}),Object(n.jsx)(f.a,{primary:"Drafts"})]}),Object(n.jsx)(v.a,{className:e.dividerMargin,variant:"fullWidth",orientation:"horizontal"}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(R.a,{})}),Object(n.jsx)(f.a,{primary:"Contacts"})]}),Object(n.jsxs)(y.a,{button:!0,children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(f.a,{primary:"Settings"})]})]})})},z=a(213),P=a(214),F=a(209),q=a(215),X=a(210),J=a(75),V="USER_LOG_IN",Y="USER_LOG_IN_SUCCESS",K="USER_LOG_IN_FAILURE",Q="USER_LOG_OUT",Z="GET_MESSAGES",$="GET_MESSAGES_SUCCESS",ee="GET_MESSAGES_FAILURE",te="SEND_MESSAGE",ae=a(23),ne=a(212),ie=a(211),ce=a(226),se=a(125),re=a.n(se),oe=a(124),le=a.n(oe),je=Object(d.a)((function(){return{messageUser:{width:"150px",minWidth:"150px"},messageText:{marginRight:10,marginLeft:10,maxWidth:"40vw",width:"40vw"},messageDate:{marginRight:0,marginLeft:"auto",width:"150px",minWidth:"150px"},iconTable:{display:"inline-block",verticalAlign:"middle",marginRight:"0.5em",height:"2em",width:"2em"},imageIcon:{height:"100%"},alertColor:{color:"#ff1744 !important"},alertColorContent:{color:"#fbc02d !important",textDecoration:"underline","&:hover":{color:"#f57f17 !important"}}}}));var de=function(e){var t=je(),a=e.item,c=Object(i.useState)(!1),s=Object(ae.a)(c,2),r=s[0],o=s[1],l=Object(i.useState)(!a.isToxic),j=Object(ae.a)(l,2),d=j[0],b=j[1],m=function(){b(!d)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(F.a,{children:[Object(n.jsx)(X.a,{align:"left",width:"3em",children:Object(n.jsx)(ie.a,{"aria-label":"expand row",size:"small",onClick:function(){o(!r)},children:r?Object(n.jsx)(le.a,{}):Object(n.jsx)(re.a,{})})}),Object(n.jsx)(X.a,{children:Object(n.jsx)(h.a,{noWrap:!0,className:t.messageUser,variant:"body1",children:a.senderUsername})}),Object(n.jsx)(X.a,{children:Object(n.jsx)(h.a,{noWrap:!0,className:t.messageText,variant:"body2",children:a.isToxic?Object(n.jsx)("span",{className:t.alertColor,children:"This message may be toxic!"}):a.content})}),Object(n.jsx)(X.a,{align:"right",children:Object(n.jsx)(h.a,{noWrap:!0,className:t.messageDate,variant:"body2",children:function(e){var t=e.split("T"),a=t[0],n=t[1].split(".")[0];return"".concat(a," ").concat(n)}(a.createdAt)})})]},a.id),Object(n.jsx)(F.a,{children:Object(n.jsx)(X.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(n.jsx)(ne.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(n.jsx)(ce.a,{margin:1,children:d?Object(n.jsx)(h.a,{variant:"h6",gutterBottom:!0,component:"div",children:a.content}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(h.a,{noWrap:!0,className:t.alertColorContent,variant:"body1",align:"center",onClick:m,children:[Object(n.jsx)(O.a,{fontSize:"default",classes:{root:t.iconTable},children:Object(n.jsx)("img",{className:t.imageIcon,src:"/assets/images/emoji-silent.svg",alt:"Silent emoji"})}),"Click here if you are sure you want to see the message."]})})})})})})]})},be=Object(d.a)((function(){return{messageUser:{width:"150px",minWidth:"150px"},messageText:{marginRight:10,marginLeft:10,maxWidth:"40vw",width:"40vw"},messageDate:{marginRight:0,marginLeft:"auto",width:"150px",minWidth:"150px"},iconRoot:{display:"inline-block",verticalAlign:"middle",marginLeft:"0.5em",height:50,width:50},imageIcon:{height:"100%"}}})),me=function(){var e=be(),t=Object(r.d)(),a=Object(r.e)((function(e){return e.messages})),c=Object(r.e)((function(e){return e.user}));return Object(i.useEffect)((function(){var e;t((e=c.jwtToken,{type:Z,token:e}))}),[]),a&&Array.isArray(a.messages)&&a.messages.length?Object(n.jsxs)(z.a,{size:"small",children:[Object(n.jsx)(P.a,{children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(X.a,{align:"left",width:"3em"}),Object(n.jsx)(X.a,{align:"left",children:Object(n.jsx)(h.a,{noWrap:!0,className:e.messageUser,variant:"h6",children:"Sender"})}),Object(n.jsx)(X.a,{children:Object(n.jsx)(h.a,{noWrap:!0,className:e.messageText,variant:"h6",children:"Message"})}),Object(n.jsx)(X.a,{align:"right",children:Object(n.jsx)(h.a,{noWrap:!0,className:e.messageDate,variant:"h6",children:"Date"})})]})}),Object(n.jsx)(q.a,{children:a.messages.slice(0).reverse().map((function(e){return Object(n.jsx)(de,{item:e},e.id)}))})]}):Object(n.jsxs)(h.a,{variant:"h6",align:"center",children:["Your inbox is empty.",Object(n.jsx)(O.a,{fontSize:"default",classes:{root:e.iconRoot},children:Object(n.jsx)("img",{className:e.imageIcon,src:"/assets/images/emoji-awkward.svg",alt:"Awkward emoji"})})]})},he=a(224),Oe=a(217),ue=Object(d.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",minWidth:"100%",minHeight:"100%",maxHeight:"100%",height:"100%"}}})),xe=function(){var e=Object(r.d)(),t=ue(),a=Object(r.e)((function(e){return e.user})),c=Object(i.useState)(""),s=Object(ae.a)(c,2),o=s[0],l=s[1],j=Object(i.useState)(""),d=Object(ae.a)(j,2),b=d[0],m=d[1];return Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(he.a,{fullWidth:!0,disabled:!0,variant:"outlined",margin:"normal",id:"sender",label:"Sender",name:"sender",type:"text",value:a.username}),Object(n.jsx)(he.a,{required:!0,fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",name:"recipient",label:"Recipient",type:"recipient",id:"recipient",value:o,onChange:function(e){l(e.target.value)}}),Object(n.jsx)(he.a,{required:!0,fullWidth:!0,multiline:!0,rows:12,rowsMax:12,variant:"outlined",margin:"normal",name:"message",label:"Message",type:"message",id:"message",value:b,onChange:function(e){m(e.target.value)}}),Object(n.jsx)(p.a,{container:!0,className:t.marginTop,children:Object(n.jsx)(p.a,{item:!0,xs:!0,children:Object(n.jsx)(Oe.a,{variant:"contained",color:"primary",type:"submit",onClick:function(){var t;e((t={token:a.jwtToken,recipientUsername:o,message:b},Object(J.a)({type:te},t)))},endIcon:Object(n.jsx)(O.a,{children:"send"}),children:"Send"})})})]})},pe=Object(d.a)((function(e){return{root:{display:"flex",height:"100%",maxHeight:"100%",maxWidth:"100%"},profileWrapper:{display:"flex",overflow:"hidden",flexDirection:"row"},firstPanel:{padding:e.spacing(2),width:"250px",backgroundColor:"LightGray"},secondPanel:{padding:e.spacing(2),width:"calc(100% - 250px)",maxHeight:"100%",overflow:"auto"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",minWidth:"100%",minHeight:"100%",maxHeight:"100%"}}})),ge=function(){var e=pe();return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(u.a,{}),Object(n.jsxs)(p.a,{container:!0,className:e.profileWrapper,children:[Object(n.jsx)(p.a,{item:!0,className:e.firstPanel,children:Object(n.jsx)(B,{})}),Object(n.jsx)(p.a,{item:!0,className:e.secondPanel,children:Object(n.jsx)(x.a,{className:e.paper,children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{path:"/write",children:Object(n.jsx)(xe,{})}),Object(n.jsx)(j.a,{path:["/inbox","/"],children:Object(n.jsx)(me,{})})]})})})]})]})},fe=function(){return Object(n.jsxs)("div",{className:"Box",children:[Object(n.jsx)("p",{children:"Home page content"}),Object(n.jsx)("p",{children:"Displayed when user is not logged in."})]})},ve=a(219),we=a(227),ye=a(220),Se=Object(d.a)((function(e){return{root:{height:"100%"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1479920252409-6e3d8e8d4866?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1950&q=80)",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",backgroundPosition:"left bottom"},paper:{margin:e.spacing(8,8),display:"flex",flexDirection:"column",alignItems:"center"},formWrapper:{width:"100%",marginTop:e.spacing(1)},imageIcon:{height:"100%"},iconRoot:{display:"inline-block",verticalAlign:"middle",height:85,width:85},marginTop:{marginTop:"1em"}}})),Ne=function(){var e=Object(r.d)(),t=Se(),a=Object(i.useState)(""),c=Object(ae.a)(a,2),s=c[0],o=c[1],l=Object(i.useState)(""),j=Object(ae.a)(l,2),d=j[0],b=j[1];return Object(n.jsxs)(p.a,{container:!0,className:t.root,children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(p.a,{item:!0,xs:12,sm:8,md:5,component:x.a,elevation:6,square:!0,children:Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(O.a,{fontSize:"large",classes:{root:t.iconRoot},children:Object(n.jsx)("img",{className:t.imageIcon,src:"/assets/images/emoji-cute.svg",alt:"Cute emoji"})}),Object(n.jsx)(h.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsxs)("div",{className:t.formWrapper,children:[Object(n.jsx)(he.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",type:"text",value:s,onChange:function(e){o(e.target.value)},autoFocus:!0}),Object(n.jsx)(he.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:d,onChange:function(e){b(e.target.value)}}),Object(n.jsxs)(p.a,{container:!0,className:t.marginTop,children:[Object(n.jsx)(p.a,{item:!0,xs:!0,children:Object(n.jsx)(ve.a,{control:Object(n.jsx)(we.a,{value:"remember",color:"primary"}),label:"Remember me"})}),Object(n.jsx)(p.a,{item:!0,xs:!0,children:Object(n.jsx)(Oe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){var t;e((t={username:s,password:d},Object(J.a)({type:V},t)))},children:"Sign In"})})]}),Object(n.jsxs)(p.a,{container:!0,className:t.marginTop,children:[Object(n.jsx)(p.a,{item:!0,xs:!0,children:Object(n.jsx)(ye.a,{to:"/#",variant:"body2",children:"Forgot password?"})}),Object(n.jsx)(p.a,{item:!0,children:Object(n.jsx)(ye.a,{to:"/#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})}),Object(n.jsx)(p.a,{item:!0,xs:!1,sm:4,md:7,className:t.image})]})},ke=Object(d.a)((function(){return{root:{height:"100vh",width:"100vw",maxHeight:"100vh",maxWidth:"100vw",overflow:"hidden"},fullBodyHeight:{height:"calc(100% - 64px)",maxHeight:"calc(100% - 64px)"},appBar:{flexGrow:1},title:{flexGrow:1},logBar:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:0,marginLeft:"auto",color:"white"},userName:{marginRight:"1em"},link:{textDecoration:"none",color:"white"},imageIcon:{height:"100%"},iconRoot:{display:"inline-block",verticalAlign:"middle"}}})),Ee=function(){var e=ke(),t=Object(r.d)(),a=Object(r.e)((function(e){return e.user})),i=function(){t({type:Q})};return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(b.a,{position:"static",children:Object(n.jsxs)(m.a,{className:e.appBar,children:[Object(n.jsx)(h.a,{variant:"h4",className:e.title,children:Object(n.jsxs)(l.a,{className:e.link,to:"/",children:[Object(n.jsx)(O.a,{fontSize:"large",classes:{root:e.iconRoot},children:Object(n.jsx)("img",{className:e.imageIcon,src:"/assets/images/emoji-happy-smiley.svg",alt:"Happy emoji"})}),"HappyMail"]})}),Object(n.jsx)("div",{className:e.grow}),a.isLoggedIn?Object(n.jsxs)("div",{className:e.logBar,children:[Object(n.jsx)(h.a,{variant:"body1",children:Object(n.jsxs)("span",{className:e.userName,children:["User:"," ",a.username]})}),Object(n.jsx)(h.a,{variant:"h6",onClick:i,children:Object(n.jsx)(l.a,{className:e.link,to:"/",children:"Log Out"})})]}):Object(n.jsx)(h.a,{variant:"h6",className:e.logBar,children:Object(n.jsx)(l.a,{className:e.link,to:"/login",children:"Log In"})})]})}),Object(n.jsx)("main",{className:e.fullBodyHeight,children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{path:"/login",children:Object(n.jsx)(Ne,{})}),Object(n.jsx)(j.a,{path:"/",children:a.isLoggedIn?Object(n.jsx)(ge,{}):Object(n.jsx)(fe,{})})]})})]})},Te=function(){return Object(n.jsx)(Ee,{})},_e=a(54),Ce=a(225),We=a(230),Ie=a(128),Ue=a(110),De=a(229),Re=a(129),Le=a(127),Ae=a(228),Ge=a(126),Me=a(223),He=a(22),Be=a(64),ze=function(e){return t=e,Object(J.a)({type:Y},t.response);var t},Pe=function(e,t,a){var n=a.ajax;return e.pipe(Object(Re.a)(V),Object(Ae.a)(t),Object(Ge.a)((function(e){var t,a,i=Object(ae.a)(e,1)[0];return n((t=i.username,a=i.password,{method:"POST",url:"".concat(Be.apiUrl,"auth/signin"),headers:{"Content-Type":"application/json"},body:{username:t,password:a}})).pipe(Object(Ge.a)((function(e){return[ze(e),Object(He.d)("/")]})),Object(Me.a)((function(e){return Le.a.of({type:K,response:e.response})})))})))},Fe=function(e){return{type:$,response:e.response}},qe=function(e,t,a){var n=a.ajax;return e.pipe(Object(Re.a)(Z),Object(Ae.a)(t),Object(Ge.a)((function(e){var t,a=Object(ae.a)(e,1)[0];return n((t=a.token,{method:"GET",url:"".concat(Be.apiUrl,"messages"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).pipe(Object(Ge.a)((function(e){return[Fe(e)]})),Object(Me.a)((function(e){return Le.a.of({type:ee,response:e.response})})))})))},Xe=function(e,t,a){var n=a.ajax;return e.pipe(Object(Re.a)(te),Object(Ae.a)(t),Object(Ge.a)((function(e){var t,a,i,c=Object(ae.a)(e,1)[0];return n((t=c.token,a=c.recipientUsername,i=c.message,{method:"POST",url:"".concat(Be.apiUrl,"messages/send"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:{recipientUsername:a,content:i}})).pipe(Object(Ge.a)((function(){return[Object(He.d)("/")]})),Object(Me.a)((function(e){return Le.a.of({type:"SEND_MESSAGE_FAILURE",response:e.response})})))})))},Je=Object(De.a)(Pe,qe,Xe),Ve={isLoggedIn:!1,username:null,jwtToken:null},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{isLoggedIn:!0,username:t.username,jwtToken:t.accessToken};case K:case Q:return Ve;default:return e}},Ke={messages:[]},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{messages:t.response};case ee:case Q:return Ke;default:return e}},Ze=Object(Ie.a)(),$e=function(){var e,t=Object(Ce.a)({dependencies:{ajax:We.a}}),a=[Object(Ue.a)(Ze),t],n=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):_e.d)(_e.a.apply(void 0,a)),i=(e=Ze,Object(_e.c)({router:Object(o.b)(e),user:Ye,messages:Qe})),c=Object(_e.e)(i,{},n);return t.run(Je),c};s.a.render(Object(n.jsx)(r.a,{store:$e(),children:Object(n.jsx)(o.a,{history:Ze,children:Object(n.jsx)(Te,{})})}),document.getElementById("root"))},64:function(e){e.exports=JSON.parse('{"apiUrl":"https://happy-mail-api.herokuapp.com/"}')}},[[159,1,2]]]);
//# sourceMappingURL=main.070bb5b1.chunk.js.map